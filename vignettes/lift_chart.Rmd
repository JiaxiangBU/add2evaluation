---
title: "Lift Chart 图及其变形"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{lift_chart}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
bibliography: add.bib
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(add2evaluation)
```

# Lift Chart

参考 @Goldschmidt2016, @Goldschmidt2016Origin

> You can use this lift chart to verify that your model is doing what you expect from it.

相对于 KS 图等，参考 [pyks](https://github.com/JiaxiangBU/pyks)，lift 图更能直观地向业务解释模型效果。

> The basic idea of lift analysis is as follows:
> 
> group data based on the predicted churn probability (value between 0.0 and 1.0). Typically, you look at deciles, so you'd have 10 groups: 0.0 - 0.1, 0.1 - 0.2, ..., 0.9 - 1.0
> calculate the true churn rate per group. That is, you count how many people in each group churned and divide this by the total number of customers per group.

将预测值等值分到10份，计算每份中的真正 y 均值，查看单调性。

![](https://www.kdnuggets.com/wp-content/uploads/lift-chart-churn-rate.png)

$$\operatorname{lift}=\frac{\text { predicted rate }}{\text { average rate }}$$

$\text { average rate }$指的是分组内的真实值的平均值。

> Looking back at our example chart, the highest group would have a lift of 0.97 / 0.2 = 4.85 and the second-highest group of 1.8. That means, if you only target users with a score higher than 0.9, you can expect to catch nearly five times more churning users than you would by targeting the same number of people randomly.

因此通过观测图，我们可以发现，

最后一个组的 lift 值为 0.97 / 0.2 = 4.85，表示这组内某一个人，比随机抽一个人，流失率高达5倍左右。

具体实际例子参考 **3.1 lift curve** https://jiaxiangli.netlify.com/2018/06/03/kaggle-house-prices/#lift-curve

# Decile Chart

参考 @Keating2019

> The bars show the factor by which our model outperforms a random assignment of 0's and 1's. Reading the first bar on the left, we see that taking the 10% of the records that are ranked by the model as "the most probable 1's" yields twice as many 1's as would a random selection of 10% of the records.

![Decile Chart 查看的是每个组内，decile mean 和 global mean 的差异，查看了模型和随机状态的差异。](https://user-images.githubusercontent.com/15884785/62838085-f9ec0400-bca9-11e9-96e1-b1a0e35191b3.png)


# 参考文献 {-}
